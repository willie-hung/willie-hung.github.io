<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blog | Integrating Sanity with Next.js</title>
    <link rel="icon" href="../../../img/favicon.ico" type="image/x-icon" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css"
    />
  </head>
  <body>
    <section class="section">
      <div class="container">
        <div class="level">
          <div class="level-left">
            <a href="../index.html"
              ><button class="button is-white">
                <span style="color: #3f3f3f" class="icon"
                  ><i class="fa-solid fa-reply"></i></span
                ><span style="color: #3f3f3f">Back</span>
              </button></a
            >
          </div>
          <div
            class="level-item is-flex is-flex-direction-row is-justify-content-center is-align-items-center"
          >
            <h1 class="title has-text-centered">
              Integrating Sanity with Next.js
            </h1>
          </div>
        </div>

        <hr />
        <h2 class="title is-size-4">Objectives</h2>
        <div class="box level content">
          <p>
            Learn how to integrate Sanity with Next.js and how to use Sanity
            Studio.
          </p>
        </div>

        <h2 class="title is-size-4">Tech Stack</h2>
        <div class="box content">
          <div
            class="is-flex is-flex-direction-row is-flex-wrap-wrap is-justify-content-center is-align-items-baseline pb-2"
          >
            <div class="buttons">
              <button class="button">
                <span class="icon">
                  <img src="../assets/sanity.png" />
                </span>
                <span>Sanity</span>
              </button>
              <button class="button">
                <span class="icon">
                  <svg viewBox="0 0 128 128">
                    <path
                      d="M64 0C28.7 0 0 28.7 0 64s28.7 64 64 64c11.2 0 21.7-2.9 30.8-7.9L48.4 55.3v36.6h-6.8V41.8h6.8l50.5 75.8C116.4 106.2 128 86.5 128 64c0-35.3-28.7-64-64-64zm22.1 84.6l-7.5-11.3V41.8h7.5v42.8z"
                    ></path>
                  </svg>
                </span>
                <span>Next.js</span>
              </button>
              <button class="button">
                <span class="icon">
                  <svg viewBox="0 0 128 128">
                    <path fill="#fff" d="M22.67 47h99.67v73.67H22.67z"></path>
                    <path
                      data-name="original"
                      fill="#007acc"
                      d="M1.5 63.91v62.5h125v-125H1.5zm100.73-5a15.56 15.56 0 017.82 4.5 20.58 20.58 0 013 4c0 .16-5.4 3.81-8.69 5.85-.12.08-.6-.44-1.13-1.23a7.09 7.09 0 00-5.87-3.53c-3.79-.26-6.23 1.73-6.21 5a4.58 4.58 0 00.54 2.34c.83 1.73 2.38 2.76 7.24 4.86 8.95 3.85 12.78 6.39 15.16 10 2.66 4 3.25 10.46 1.45 15.24-2 5.2-6.9 8.73-13.83 9.9a38.32 38.32 0 01-9.52-.1 23 23 0 01-12.72-6.63c-1.15-1.27-3.39-4.58-3.25-4.82a9.34 9.34 0 011.15-.73L82 101l3.59-2.08.75 1.11a16.78 16.78 0 004.74 4.54c4 2.1 9.46 1.81 12.16-.62a5.43 5.43 0 00.69-6.92c-1-1.39-3-2.56-8.59-5-6.45-2.78-9.23-4.5-11.77-7.24a16.48 16.48 0 01-3.43-6.25 25 25 0 01-.22-8c1.33-6.23 6-10.58 12.82-11.87a31.66 31.66 0 019.49.26zm-29.34 5.24v5.12H56.66v46.23H45.15V69.26H28.88v-5a49.19 49.19 0 01.12-5.17C29.08 59 39 59 51 59h21.83z"
                    ></path>
                  </svg>
                </span>
                <span>TypeScript</span>
              </button>
            </div>
          </div>
        </div>

        <h2 class="title is-size-4">What is Sanity?</h2>
        <div class="box content">
          <p>
            Sanity.io is the <strong>platform for structured content</strong>.
            With Sanity.io you can manage your text, images, and other media
            with APIs.
          </p>
        </div>

        <h2 class="title is-size-4">What is Headless CMS?</h2>
        <div class="box content">
          <p>
            A headless CMS is a content management system that separates where
            content is stored (the “body”) from where it is presented (the
            “head“). Think about headless architecture like this:
            <strong
              >the main job of a headless CMS is to store and manage your
              content</strong
            >. It doesn’t really care what you want to do with that content. To
            learn more on headless CMS, please refer to
            <a href="https://www.contentful.com/headless-cms/" target="_blank"
              >this article</a
            >
            and
            <a href="https://www.sanity.io/headless-cms" target="_blank"
              >this article</a
            >.
          </p>
        </div>

        <h2 class="title is-size-4">CDN v.s. CMS</h2>
        <div class="box content">
          <p>
            A CDN is a network of servers that cache data/content, improving
            load speeds and security. On the other hand, CMS’s are pieces of
            software that allow users to manage and use their content as needed.
            A CMS may rely on a CDN to allow its users to access content and
            data quickly but not vice versa. To learn more on the differences of
            CDN and CMS, please refer to
            <a
              href="https://www.dooh.ly/post/whats-the-difference-between-cdn-and-cms#:~:text=To%20simplify%20it%3B%20a%20CDN,quickly%20but%20not%20vice%20versa."
              target="_blank"
              >this article</a
            >
          </p>
        </div>

        <h2 class="title is-size-4">How Sanity works?</h2>
        <div class="box content">
          <p>
            As shown in the figure below, Sanity is a headless CMS.
            <strong
              >It stores the content in the cloud and provides APIs for
              developers to access the content</strong
            >. The content can be accessed by any programming languages. In this
            article, we will use Next.js to access the content.
          </p>
          <div class="is-flex is-justify-content-center is-align-items-center">
            <figure class="image column is-two-thirds">
              <image src="./figures/post26/figure1.webp" />
            </figure>
          </div>
        </div>

        <h2 class="title is-size-4">Integrating with Next.js</h2>
        <div class="box content">
          <h3 class="subtitle is-size-5">Setup a Sanity Project</h3>
          <p>
            Follow
            <a
              href="https://www.sanity.io/docs/create-a-sanity-project"
              target="_blank"
              >the setup tutorial</a
            >
            to setup your first Sanity project.
          </p>

          <h3 class="subtitle is-size-5">Setup Sanity Studio</h3>
          <p>
            Run <code>npm run dev</code> to start the Sanity Studio. You should
            see the following page. However, in your case, there is no content
            yet.
          </p>
          <div class="is-flex is-justify-content-center is-align-items-center">
            <figure class="image column is-two-thirds">
              <image src="./figures/post26/figure2.png" />
            </figure>
          </div>

          <h3 class="subtitle is-size-5">Create your own schema</h3>
          <p>
            In this article, we will create a simple schema to store the
            information of a pet.
          </p>
          <script src="https://gist.github.com/Willie-The-Lord/6300ce973e66723cc4a916b59c248ed2.js"></script>
          <p>In the <code>index.ts</code> file, add the following code.</p>
          <script src="https://gist.github.com/Willie-The-Lord/2d29e6c7b1275d147e50985637afc3ba.js"></script>
          <p>
            After creating the schema, you could head back to the terminal and
            run <code>npm run dev</code> to restart the Sanity Studio.
          </p>
          <p>
            Now, you should see the page I shown before. You can now add a new
            pet. These are <storng>the content</storng> we will use in the next
            section.
          </p>

          <h3 class="subtitle is-size-5">Check your API mangagement console</h3>
          <p>
            In your
            <a href="http://sanity.io/manage" target="_blank"
              >API management page</a
            >, you can see the projectID for accessing the content. You should
            see something like this.
          </p>
          <div class="is-flex is-justify-content-center is-align-items-center">
            <figure class="image column is-two-thirds">
              <image src="./figures/post26/figure3.png" />
            </figure>
          </div>

          <h3 class="subtitle is-size-5">In your Next.js project</h3>
          <p>
            Run <code>npm i @sanity/client</code>
            to install the Sanity client. Then, create a file called
            <code>index.tsx</code>. In the file, add the following code.
          </p>

          <script src="https://gist.github.com/Willie-The-Lord/bc58100990fb3717b0709515abcff7d9.js"></script>
          <p>
            In the code, we first import the Sanity client. Then, we create a
            client with the projectID we got from the API management page. Then,
            we <strong>query the content from Sanity</strong>. In this case, we
            query the content <strong>with type equals to pet</strong>. Then, we
            display the content in the page.
          </p>

          <h3 class="subtitle is-size-5">In the browser</h3>
          <p>
            Now, you should see the content you created in the Sanity Studio.
          </p>
          <div class="is-flex is-justify-content-center is-align-items-center">
            <figure class="image column is-two-thirds">
              <image src="./figures/post26/figure4.png" />
            </figure>
          </div>
        </div>

        <h2 class="title is-size-4">Conclusion</h2>
        <div class="box content">
          <p>
            In this article, we learned how to use Sanity to create a headless
            CMS. We also learned how to
            <strong>integrate Sanity with Next.js</strong> . It is a 5 minutes
            setup! It is very easy to use. I hope you enjoy this article. If you
            have any questions, please leave a comment below.
          </p>
        </div>

        <h2 class="title is-size-4">Resources</h2>
        <div class="box content">
          <ul style="padding-bottom: 20px">
            <li>
              <a
                href="https://www.sanity.io/docs/a-short-introduction-to-sanity-io"
                target="_blank"
                >Sanity.io <i class="fa-solid fa-arrow-up-right-from-square"></i
              ></a>
            </li>
          </ul>
        </div>
      </div>
    </section>

    <div class="mr-5 ml-5 mb-5">
      <script
        src="https://utteranc.es/client.js"
        repo="Willie-The-Lord/Sung-Jie-Blog-Comment"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async
      ></script>
    </div>

    <footer class="footer">
      <div class="content has-text-centered">
        <p>
          Written by
          <strong
            ><a href="https://sungjiehung.com/" target="_blank"
              >Sung-Jie Hung</a
            ></strong
          >
          ❤️
        </p>
        <p>Last update: <strong>Jul 28, 2023</strong></p>
      </div>
    </footer>

    <script
      src="https://kit.fontawesome.com/7119540adb.js"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
