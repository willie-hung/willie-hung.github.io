<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blog | Implement Promise in TypeScript</title>
    <link rel="icon" href="../../../img/favicon.ico" type="image/x-icon" />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css"
    />
  </head>
  <body>
    <section class="section">
      <div class="container">
        <div class="level">
          <div class="level-left">
            <a href="../index.html"
              ><button class="button is-white">
                <span style="color: #3f3f3f" class="icon"
                  ><i class="fa-solid fa-reply"></i></span
                ><span style="color: #3f3f3f">Back</span>
              </button></a
            >
          </div>
          <div
            class="level-item is-flex is-flex-direction-row is-justify-content-center is-align-items-center"
          >
            <h1 class="title has-text-centered">
              Implement Promise in TypeScript
            </h1>
          </div>
        </div>

        <hr />
        <p class="is-size-3">Objectives</p>
        <div class="box level content">
          <p>Exploring common use cases of Promises in TypeScript</p>
        </div>

        <p class="is-size-3">How Promise works</p>
        <div class="is-flex is-justify-content-center is-align-items-center">
          <figure class="image column is-two-thirds">
            <image src="./figures/post6/figure1.png" />
          </figure>
        </div>

        <p class="is-size-3">Basic Promise</p>

        <div class="box content">
          <p class="is-size-5">Handling asynchronous operations</p>
          <script src="https://gist.github.com/Willie-The-Lord/9c5f8b47bf531821a646464452acb1e3.js"></script>
          <p class="is-size-5">Let's walk through the code:</p>
          <ul>
            <li>
              The fetchData function returns a Promise that resolves to a
              string.
            </li>

            <li>
              Inside the fetchData function, a new Promise is created using the
              Promise constructor and a <strong>setTimeout</strong> function is
              used to simulate an <strong>asynchronous</strong> operation.
            </li>
            <li>
              If the data exists, the Promise is fulfilled by calling
              resolve(data). Otherwise, the Promise is rejected by calling
              reject("Data not found").
            </li>
            <li>
              The fetchData function is called, and the returned Promise is
              chained with a then method to handle the resolved value.
            </li>
            <li>
              Inside the then method, a <strong>callback</strong> function logs
              a message and the received data to the console.
            </li>
            <li>
              The Promise chain also includes a catch method to handle any
              errors, with a callback function that logs an error message to the
              console.
            </li>
          </ul>
        </div>

        <p class="is-size-3">Chaining Promises</p>
        <div class="box content">
          <script src="https://gist.github.com/Willie-The-Lord/8c9849dd4846a8bc5555fe31c2676284.js"></script>
          <p class="is-size-5">Let's walk through the code:</p>
          <ul>
            <li>
              The code defines two functions: fetchUser and fetchUserPosts.
            </li>

            <li>
              The fetchUser function takes a userId as a parameter and returns a
              promise that resolves with a string representing the user's name
              ("Sung-Jie Hung") if the userId is 1, or rejects with an error
              message ("User not found") otherwise. This function simulates an
              asynchronous operation using setTimeout.
            </li>
            <li>
              The fetchUserPosts function takes a user string as a parameter and
              returns a promise that resolves with an array of strings
              representing the user's posts ("Post 1", "Post 2", "Post 3"). This
              function also simulates an asynchronous operation using
              setTimeout.
            </li>
            <li>
              The code then uses these two functions to fetch a user with userId
              1 and log the user's name and posts.
            </li>
            <li>
              It does this by calling fetchUser(1), which returns a promise.
              <strong>When that promise resolves successfully</strong>, the then
              block is executed, which logs the user's name and then calls
              fetchUserPosts(user), passing the user's name as an argument.
            </li>
            <li>
              The fetchUserPosts promise is also handled with a then block,
              which logs the user's posts.
            </li>
            <li>
              If any error occurs during the promise chain, the catch block is
              executed, which logs the error message.
            </li>
          </ul>
        </div>

        <p class="is-size-3">Using Promise.all()</p>
        <div class="box content">
          <script src="https://gist.github.com/Willie-The-Lord/fc5785af80e1ea3bc7dc5a6e26af45b7.js"></script>
          <p class="is-size-5">Let's walk through the code:</p>
          <ul>
            <li>
              The code uses Promise.all to
              <strong>concurrently execute three promises</strong>: fetchUser,
              fetchUserPosts, and fetchUserComments. It
              <strong>passes an array of promises as an argument</strong> to
              Promise.all.
            </li>
            <li>
              If all promises are resolved successfully, the then callback is
              executed, receiving an array containing the resolved values of the
              promises: [user, posts, comments].
            </li>
            <li>
              Inside the then callback, it logs the user, user posts, and user
              comments to the console.
            </li>
            <li>
              If any of the promises is rejected, the catch callback is
              executed, logging the error to the console.
            </li>
          </ul>
        </div>

        <p class="is-size-3">Source</p>
        <div class="box content">
          <ul style="padding-bottom: 20px">
            <li>
              <a
                href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"
                target="_blank"
                >Mdn Web Documentation
                <i class="fa-solid fa-arrow-up-right-from-square"></i
              ></a>
            </li>
          </ul>
        </div>
      </div>
    </section>

    <div class="mr-5 ml-5 mb-5">
      <script
        src="https://utteranc.es/client.js"
        repo="Willie-The-Lord/Sung-Jie-Blog-Comment"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async
      ></script>
    </div>

    <footer class="footer">
      <div class="content has-text-centered">
        <p>
          Written by
          <strong
            ><a href="https://sungjiehung.com/" target="_blank"
              >Sung-Jie Hung</a
            ></strong
          >
          ❤️
        </p>
        <p>Last update: <strong>Jul 12, 2023</strong></p>
      </div>
    </footer>

    <script
      src="https://kit.fontawesome.com/7119540adb.js"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
