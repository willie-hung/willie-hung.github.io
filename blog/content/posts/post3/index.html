<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blog | Asynchronous fetching in TypeScript</title>
    <link rel="icon" href="../../../../img/favicon.ico" type="image/x-icon" />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css"
    />
  </head>
  <body>
    <section class="section">
      <div class="container">
        <div class="level">
          <div class="level-left">
            <a href="../../index.html"
              ><button class="button is-white">
                <span style="color: #3f3f3f" class="icon"
                  ><i class="fa-solid fa-reply"></i></span
                ><span style="color: #3f3f3f">Back</span>
              </button></a
            >
          </div>
          <div
            class="level-item is-flex is-flex-direction-row is-justify-content-center is-align-items-center"
          >
            <h1 class="title has-text-centered">
              Asynchronous fetching in TypeScript
            </h1>
          </div>
        </div>

        <hr />
        <p class="is-size-3">Objectives</p>
        <div class="box level content">
          <p>Learn how to use fetch with async/await in TypeScript</p>
        </div>

        <p class="is-size-3">Async/Await</p>

        <div class="box content">
          <p>
            To use it in a Node.js environment, you need to use a library like
            <strong>node-fetch</strong> or <strong>axios</strong> to make HTTP
            requests.
          </p>
          <p class="is-size-5">
            <a href="https://www.npmjs.com/package/node-fetch" target="_blank"
              >node-fetch</a
            >
          </p>
          <script src="https://gist.github.com/Willie-The-Lord/e1cf3cc87bfc2442d78a953a5927c2f5.js"></script>
          <p class="is-size-5">
            <a href="https://www.npmjs.com/package/axios" target="_blank"
              >axios</a
            >
          </p>
          <p>
            The axios library is used to make an asynchronous GET request to the
            specified API URL. The response data is extracted from the response
            object, and you can further process it within the
            <strong>.then</strong> block. If any errors occur during the
            request, they will be caught and logged in the
            <strong>.catch</strong> block.
          </p>
          <script src="https://gist.github.com/Willie-The-Lord/9561e8ed4335c7af30761824012cc151.js"></script>
        </div>

        <p class="is-size-3">
          Demo: Fetching Local Business Data using Rapid API
        </p>
        <div class="box content">
          <p>
            First, I import the Axios library, which is used to make HTTP
            requests. Then, <strong>two interfaces</strong>, "Response" and
            "Business," are defined to specify the structure of the data
            returned from the API.
          </p>
          <script src="https://gist.github.com/Willie-The-Lord/d531636d1bea9cae787fe8218058cfbb.js"></script>
          <p>
            The <strong>main function</strong>
            <strong>"getBusinesses"</strong> is responsible for fetching the
            business data. It sets up the necessary parameters for the API
            request, including the request method, URL, query parameters (such
            as the search query, limit, latitude, longitude, language, and
            region), and headers (including the API key and host).
          </p>
          <p>
            Using Axios, a GET request is made to the specified URL with the
            provided options. The response is handled asynchronously as a
            <strong>promise</strong>.
          </p>
          <script src="https://gist.github.com/Willie-The-Lord/ab7c20e7d2cff9a92404f603aeac01cd.js"></script>
          <p>
            Once the response is received, the data property from the response,
            which conforms to the "Response" interface, is extracted. This data
            property contains <strong>an array of businesses</strong>. The code
            then maps over this array to transform each business object,
            selecting specific properties such as name, phone number, rating,
            review count, and timezone. These transformed objects are stored in
            a new array called "allBusinesses."
          </p>
          <p>
            Finally, the "allBusinesses" array is logged to the console,
            providing information about each business, such as its name, phone
            number, rating, review count, and timezone. In case of any errors
            during the API request, the code catches them and logs them to the
            console.
          </p>
          <p>
            To initiate the API request and retrieve the business data,
            <strong>the "getBusinesses" function is called</strong>. The
            expected output, provided as a comment, demonstrates a sample list
            of businesses in San Francisco, USA, along with their respective
            details.
          </p>
          <p class="is-size-5">Let's see the final code</p>
          <script src="https://gist.github.com/Willie-The-Lord/f7ba518a853aa1eab52b4f2e4f769c94.js"></script>
        </div>

        <p class="is-size-3">Tags</p>
        <div class="box content">
          <span class="tag is-link is-light">TypeScript</span>
          <span class="tag is-link is-light">JSONplaceholder</span>
          <span class="tag is-link is-light">Rapid API</span>
        </div>

        <p class="is-size-3">Source</p>
        <div class="box content">
          <ul style="padding-bottom: 20px">
            <li>
              <a href="https://jsonplaceholder.typicode.com/" target="_blank"
                >{JSON} Placeholder
                <i class="fa-solid fa-arrow-up-right-from-square"></i>
              </a>
            </li>
            <li>
              <a
                href="https://rapidapi.com/letscrape-6bRBa3QguO5/api/local-business-data"
                target="_blank"
                >Local Business Data - Rapid API
                <i class="fa-solid fa-arrow-up-right-from-square"></i
              ></a>
            </li>
            <li>
              <a href="https://rapidapi.com/" target="_blank"
                >Rapid API <i class="fa-solid fa-arrow-up-right-from-square"></i
              ></a>
            </li>
          </ul>
        </div>
      </div>
    </section>

    <footer class="footer">
      <div class="content has-text-centered">
        <p>
          Written by
          <strong
            ><a href="https://sungjiehung.com/" target="_blank"
              >Sung-Jie Hung</a
            ></strong
          >
          ❤️
        </p>
        <p>Last update: <strong>Jul 10, 2023</strong></p>
      </div>
    </footer>

    <script
      src="https://kit.fontawesome.com/7119540adb.js"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
